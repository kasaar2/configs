# Tmux Configuration
# Install: ln -s ~/path/to/configs/terminal/tmux.conf ~/.tmux.conf
# Reload: tmux source-file ~/.tmux.conf

# ============================================
# General Settings
# ============================================

# Change prefix from Ctrl+b to Ctrl+a (easier to reach)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Start window numbering at 1 instead of 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer size
set -g history-limit 10000

# Enable mouse support
set -g mouse on

# Set default terminal mode to 256 colors
set -g default-terminal "screen-256color"

# Set escape time to 0 for faster command sequences
set -sg escape-time 0

# Increase display time for status messages
set -g display-time 2000

# Enable activity alerts
setw -g monitor-activity on
set -g visual-activity off

# ============================================
# Key Bindings
# ============================================

# Reload config file
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and - (more intuitive)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Create new window in current path
bind c new-window -c "#{pane_current_path}"

# Switch panes using Alt+arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Switch panes using vim-style navigation (with prefix)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes using vim-style keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Toggle synchronize-panes (send commands to all panes)
bind S setw synchronize-panes

# ============================================
# Copy Mode (Vi-style)
# ============================================

# Use vi mode for copy mode
setw -g mode-keys vi

# Vi-style copy/paste
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# macOS clipboard integration (requires reattach-to-user-namespace)
# Uncomment if on macOS:
# bind -T copy-mode-vi y send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# Linux clipboard integration (requires xclip)
# Uncomment if on Linux with X11:
# bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# ============================================
# Status Bar
# ============================================

# Status bar position
set-option -g status-position bottom

# Status bar colors
set -g status-style bg=colour235,fg=colour255

# Left status bar: [session] window
set -g status-left-length 20
set -g status-left "#[fg=colour39,bold][#S] "

# Right status bar: host | %H:%M %d-%b-%y
set -g status-right-length 50
set -g status-right "#[fg=colour245]#H #[fg=colour255]| %H:%M %d-%b-%y"

# Window status format
set -g window-status-format " #I:#W "
set -g window-status-current-format " #I:#W "

# Current window status style
set -g window-status-current-style bg=colour39,fg=colour235,bold

# Window status style
set -g window-status-style bg=colour235,fg=colour245

# Activity window style
set -g window-status-activity-style bg=colour235,fg=colour214

# ============================================
# Pane Borders
# ============================================

# Pane border colors
set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour39

# Display pane numbers longer
set -g display-panes-time 2000

# ============================================
# Plugin Configuration
# ============================================

# Tmux Plugin Manager (optional)
# Install TPM: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# Then press prefix + I to install plugins

# List of plugins
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-resurrect'    # Save/restore sessions
# set -g @plugin 'tmux-plugins/tmux-continuum'    # Auto-save sessions
# set -g @plugin 'tmux-plugins/tmux-yank'         # Better copy/paste

# Plugin settings
# set -g @continuum-restore 'on'    # Auto-restore last session

# Initialize TMUX plugin manager (keep this line at the very bottom)
# run '~/.tmux/plugins/tpm/tpm'

# ============================================
# Quick Reference
# ============================================

# Prefix: Ctrl+a
#
# Session Management:
#   Ctrl+a d              Detach from session
#   Ctrl+a $              Rename session
#   tmux ls               List sessions
#   tmux attach           Attach to last session
#   tmux attach -t name   Attach to named session
#
# Window Management:
#   Ctrl+a c              Create new window
#   Ctrl+a ,              Rename window
#   Ctrl+a n              Next window
#   Ctrl+a p              Previous window
#   Ctrl+a 0-9            Switch to window by number
#   Ctrl+a &              Kill window
#
# Pane Management:
#   Ctrl+a |              Split horizontally
#   Ctrl+a -              Split vertically
#   Ctrl+a h/j/k/l        Navigate panes (vim-style)
#   Alt+Arrow             Navigate panes (no prefix needed)
#   Ctrl+a H/J/K/L        Resize pane (hold and repeat)
#   Ctrl+a x              Kill pane
#   Ctrl+a z              Toggle pane zoom
#   Ctrl+a S              Synchronize panes (toggle)
#
# Copy Mode:
#   Ctrl+a [              Enter copy mode
#   v                     Begin selection (in copy mode)
#   y                     Copy selection (in copy mode)
#   q                     Exit copy mode
#   Ctrl+a ]              Paste
#
# Other:
#   Ctrl+a r              Reload config
#   Ctrl+a ?              List all key bindings
#   Ctrl+a :              Enter command mode
